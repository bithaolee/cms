$(function(){
	var sidebar = $('.col-md-3'),
		docDiv = sidebar.children('.bs-docs-sidebar'),
		sidebarHeight = sidebar.offset().top,//相对body的偏移量
		liObj = $('.bs-docs-sidenav li');
	
	//保存每个锚点元素的上下边距离body最顶端的高度以及此元素
	idObj = {};
	for (var i = 0; i < liObj.length; i++) {
		//获取每个a标签的href属性值
		var id= $(liObj[i]).children('a').attr('href');
		//通过id查找此元素
		var elm = $(id);
		if(elm.length > 0){
			var top = elm.offset().top,
				bottom = top + elm.height();
			idObj[i] = {
				'elm':$(liObj[i]),
				'top':top,
				'bottom':bottom
			};
		}
	};
	console.log(idObj);
	// console.log(liObj);
	$(window).scroll( function() {
		var top = $(document).scrollTop();//页面向下滑动的距离
		//sidebar的位置
		if(top > sidebarHeight){
			docDiv.removeClass('affix-top');
			docDiv.addClass('affix');
		}else{
			docDiv.removeClass('affix');
			docDiv.addClass('affix-top');
		}

		//每次乡下滑动，遍历对象idObj，看top位于哪个元素中间
		for(name in idObj){
			if(top >= idObj[name].top && top < idObj[name].bottom){
				//激活此元素
				idObj[name].elm.addClass('active');
			}else{
				idObj[name].elm.removeClass('active');
			}
		}
	} );
	
});
